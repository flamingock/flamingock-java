name: License Header Check

on:
  pull_request:
    branches: [ master, develop ]
  push:
    branches: [ master, develop ]

jobs:
  license-check:
    runs-on: ubuntu-latest
    name: Check License Headers

    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Java
      uses: graalvm/setup-graalvm@v1
      with:
        java-version: '17'
        distribution: 'graalvm-community'

    - name: Setup Gradle
      uses: gradle/gradle-build-action@v3

    - name: Check license headers
      run: ./gradlew spotlessCheck

    - name: License check results
      if: failure()
      run: |
        echo "‚ùå License header check failed!"
        echo ""
        echo "Some files are missing proper license headers."
        echo ""
        echo "To fix this issue:"
        echo "1. Run './gradlew spotlessApply' to automatically add missing headers"
        echo "2. Commit the changes"
        echo "3. Push to update your pull request"
        echo ""
        echo "Or check individual files and add the required license header manually."
        exit 1
